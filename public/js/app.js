(function(){"use strict";var t={7752:function(t,e,o){var n=o(6369),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view"),e("notificationComponent")],1)},s=[],i=o(1001),r={},c=(0,i.Z)(r,a,s,!1,null,null,null),u=c.exports,l=o(2631),d=(o(7658),o(3822));n["default"].use(d.ZP);var p=new d.ZP.Store({state:{res:localStorage.getItem("res")||{},baseUrl:"http://127.0.0.1:3030",url:"http://127.0.0.1:3030/api",token:localStorage.getItem("access_token")||null,user:localStorage.getItem("user_info")||{},status:localStorage.getItem("api_status")||null,description:localStorage.getItem("api_description")||null,notifications:[]},getters:{},mutations:{SET_RES(t,e){t.res=e},GET_RES(t){t.res=localStorage.getItem("res")},SET_STATUS(t,e){t.status=e.status},GET_STATUS(t){t.status=localStorage.getItem("api_status")},SET_DESCRIPTION(t,e){t.description=e.description},GET_DESCRIPTION(t){t.description=localStorage.getItem("api_description")},SET_TOKEN(t,e){t.token=e.token},GET_TOKEN(t){t.token=localStorage.getItem("access_token")},SET_USER(t,e){t.user=e},GET_USER(t){t.user=localStorage.getItem("user_info")},PUSH_NOTIFICATION(t,e){t.notifications.push({...e,id:(Math.random().toString(36)+Date.now().toString()).substr(2)})},REMOVE_NOTIFICATION(t,e){t.notifications=t.notifications.filter((t=>t.id!==e.id))}},actions:{setRes({commit:t},e){localStorage.setItem("res",JSON.stringify(e)),t("SET_RES",e)},getRes({commit:t}){t("GET_RES")},setToken({commit:t},e){localStorage.setItem("access_token",e),t("SET_TOKEN",e)},getToken({commit:t}){t("GET_TOKEN")},setUser({commit:t},e){localStorage.setItem("user_info",JSON.stringify(e)),t("SET_USER",e)},getUser({commit:t}){t("GET_USER")},addNotification({commit:t},e){t("PUSH_NOTIFICATION",e)},removeNotification({commit:t},e){t("REMOVE_NOTIFICATION",e)},setStatus({commit:t},e){localStorage.setItem("api_status",e),t("SET_STATUS",e)},getStatus({commit:t}){t("GET_STATUS")},setDescription({commit:t},e){localStorage.setItem("api_description",e),t("SET_DESCRIPTION",status)},getDescription({commit:t}){t("GET_DESCRIPTION")}},modules:{}});n["default"].use(l.ZP);const f=[{path:"/login",name:"login",component:()=>o.e(222).then(o.bind(o,7222))},{path:"/register",name:"register",component:()=>o.e(511).then(o.bind(o,1511))},{path:"/",name:"home",component:()=>o.e(396).then(o.bind(o,3396))},{path:"/categories",name:"categories",component:()=>o.e(698).then(o.bind(o,5698))},{path:"/items",name:"items",component:()=>o.e(667).then(o.bind(o,2667))}],m=new l.ZP({mode:"history",routes:f});m.beforeEach((async(t,e,o)=>{p.dispatch("getUser"),p.dispatch("getToken");const n=p.state.token,a=["/login","/register","/guest"],s=!a.includes(t.path);return console.log(s),console.log(e.path),"/register"!==t.path&&"/login"!==t.path&&"/guest"!==t.path||o(),s&&!n?(console.log("not logged"),o("/login")):o()}));var g=m,h=o(4161),v=o(8752),b=o(6681),S=o(9425),_=o(7389);o(7024);const y=t=>{t?h.Z.defaults.headers={Authorization:"Bearer "+t,Accept:"application/json"}:delete h.Z.defaults.headers.Authorization};var T=y;async function E(t,e,o=null){T(p.state.token),0===t?await h.Z.get(`${p.state.url}${e}`).then((t=>{console.log(t.data),p.dispatch("setRes",t.data)})).catch((t=>{console.log(t),401===t.response.status||403===t.response.status?(g.push({name:"login"}),localStorage.clear()):(console.log(t.response),p.dispatch("setRes",t.response))})):1===t?await h.Z.post(`${p.state.url}${e}`,o).then((t=>{console.log(t),p.dispatch("setRes",t.data)})).catch((t=>{401===t.response.status||403===t.response.status?(g.push({name:"login"}),localStorage.clear()):(console.log(t.response),p.dispatch("setRes",t.response))})):2===t&&await h.Z["delete"](`${p.state.url}${e}`).then((t=>{console.log(t),p.dispatch("setRes",t.data)})).catch((t=>{401===t.response.status||403===t.response.status?(g.push({name:"login"}),localStorage.clear()):(console.log(t.response),p.dispatch("setRes",t.response))}))}var C={resource:E};const N=(t,e)=>{p.dispatch("addNotification",{type:t,message:e})};var I=N,k=o(3494),O=o(8539),$=o(7749),w=function(){var t=this,e=t._self._c;return this.$store.state.notifications.length?e("div",{staticClass:"notifications"},t._l(t.notifications,(function(t){return e("notificationMessage",{key:t.id,attrs:{notification:t}})})),1):t._e()},R=[],A=function(){var t=this,e=t._self._c;return e("Transition",[e("div",{staticClass:"alert fade show",class:t.typeClass,attrs:{role:"alert"}},[t._v(" "+t._s(t.notification.message)+" ")])])},P=[],Z={name:"notificationMessage",props:["notification"],data(){return{timeout:null}},computed:{typeClass(){return`alert-${this.notification.type}`}},created(){this.timeout=setTimeout((()=>{this.$store.dispatch("removeNotification",this.notification)}),2500)},beforeUnmount(){clearTimeout(this.timeout)}},x=Z,U=(0,i.Z)(x,A,P,!1,null,"1a1caeb8",null),j=U.exports,M={name:"notificationComponent",components:{notificationMessage:j},computed:(0,d.rn)(["notifications"])},D=M,G=(0,i.Z)(D,w,R,!1,null,"09b3bd46",null),B=G.exports,F=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header m-2"},[e("side-bar"),e("div",{staticClass:"logout"},[e("button",{directives:[{name:"b-modal",rawName:"v-b-modal.bv-modal-logout",modifiers:{"bv-modal-logout":!0}}],staticClass:"udpate-action"},[e("p",{staticClass:"icon h5"},[e("font-awesome-icon",{attrs:{icon:"sign-out"}})],1)])]),e("div",{attrs:{id:"logout"}},[e("b-modal",{attrs:{id:"bv-modal-logout","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Logout from CMS ")]},proxy:!0}])},[e("div",{staticClass:"d-block text-center"},[e("h4",{staticClass:"popup-title"},[t._v("Are you sure?")]),e("div",{staticClass:"buttons",staticStyle:{float:"right"}},[e("b-button",{staticClass:"save primary-back mt-2",attrs:{variant:"danger"},on:{click:function(e){return t.logout()}}},[e("div",[t._v("Logout")])])],1)])])],1)],1)},L=[],H={name:"NavBar",data(){return{layout:this.$route.name}},methods:{push(t){this.$router.push(t)},async logout(){await this.$resource.resource(1,"/logout"),await this.$store.dispatch("getRes");const t=JSON.parse(this.$store.state.res);t.status?(this.$addNotification("success","success"),localStorage.clear(),this.$router.push({name:"login"})):(localStorage.clear(),this.$router.push({name:"login"}),this.$addNotification("danger",t.response))}}},K=H,J=(0,i.Z)(K,F,L,!1,null,"da917a78",null),q=J.exports,X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header m-2"},[e("div",{staticClass:"sidebar"},[e("div",{staticClass:"action"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-variant",modifiers:{"sidebar-variant":!0}}]},[e("font-awesome-icon",{attrs:{icon:"list"}})],1)],1),e("b-sidebar",{attrs:{id:"sidebar-variant",title:"Restaurant-CMS",shadow:""}},[e("ul",{staticClass:"buttons"},[e("li",{staticClass:"btn",class:{active:"home"===t.layout},on:{click:function(e){return t.push("/")}}},[e("p",[t._v("menus")])]),e("li",{staticClass:"btn",class:{active:"categories"===t.layout},on:{click:function(e){return t.push("/categories")}}},[e("p",[t._v("categories")])]),e("li",{staticClass:"btn",class:{active:"items"===t.layout},on:{click:function(e){return t.push("/items")}}},[e("p",[t._v("items")])])])])],1)])},z=[],V={name:"sideBar",data(){return{layout:this.$route.name}},methods:{push(t){this.$route.path!==t&&this.$router.push(t)}}},Q=V,W=(0,i.Z)(Q,X,z,!1,null,"0809de89",null),Y=W.exports,tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"popup-inner"},[t._t("default"),e("h4",{staticClass:"popup-title"},[t._v("Are you sure to delete "+t._s(t.name)+"?")]),e("div",{staticClass:"buttons"},[e("b-button",{staticClass:"save primary-back mt-2",attrs:{variant:"danger",disabled:t.disabled},on:{click:function(e){return t.deleteItem(t.pages,t.scope,t.id)}}},[e("div",[t._v("Delete")])])],1)],2)},et=[],ot={name:"DeleteModal",data(){return{disabled:!1}},props:["TogglePopup","name","scope","id","pages"],methods:{async deleteItem(t,e,o){await this.$resource.resource(2,`/${e}/${o}`),await this.$store.dispatch("getRes");const n=JSON.parse(this.$store.state.res);!0===n.status?(this.$addNotification("success",n.message),this.$emit("delete"),this.$router.go()):this.$addNotification("danger",n.message)}}},nt=ot,at=(0,i.Z)(nt,tt,et,!1,null,"714e6344",null),st=at.exports;k.vI.add(O.XSk,O.Zrf,O.HEx),n["default"].component("font-awesome-icon",$.GN),n["default"].component("BIconPencilSquare",v.Sle),n["default"].component("notificationComponent",B),n["default"].component("NavBar",q),n["default"].component("sideBar",Y),n["default"].component("DeleteModal",st),n["default"].prototype.$setAuthHeader=T,n["default"].prototype.$addNotification=I,n["default"].prototype.$resource=C,n["default"].prototype.$store=p,n["default"].prototype.$axios=h.Z,n["default"].use(b.XG7).use(S.X).use(_.ZP),new n["default"]({router:g,store:p,render:t=>t(u)}).$mount("#app")}},e={};function o(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,n,a,s){if(!n){var i=1/0;for(l=0;l<t.length;l++){n=t[l][0],a=t[l][1],s=t[l][2];for(var r=!0,c=0;c<n.length;c++)(!1&s||i>=s)&&Object.keys(o.O).every((function(t){return o.O[t](n[c])}))?n.splice(c--,1):(r=!1,s<i&&(i=s));if(r){t.splice(l--,1);var u=a();void 0!==u&&(e=u)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[n,a,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,n){return o.f[n](t,e),e}),[]))}}(),function(){o.u=function(t){return"js/"+t+"."+{222:"0d110c8a",396:"e26481bc",511:"5f457064",667:"efe6f960",698:"efb18487"}[t]+".js"}}(),function(){o.miniCssF=function(t){return"css/"+t+"."+{222:"41fd86a7",396:"d1c3a49c",511:"006ed559",667:"dd1a574b",698:"bc26a8a5"}[t]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="media-app-vue:";o.l=function(n,a,s,i){if(t[n])t[n].push(a);else{var r,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==e+s){r=d;break}}r||(c=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.setAttribute("data-webpack",e+s),r.src=n),t[n]=[a];var p=function(e,o){r.onerror=r.onload=null,clearTimeout(f);var a=t[n];if(delete t[n],r.parentNode&&r.parentNode.removeChild(r),a&&a.forEach((function(t){return t(o)})),e)return e(o)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),c&&document.head.appendChild(r)}}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,o,n,a){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var i=function(o){if(s.onerror=s.onload=null,"load"===o.type)n();else{var i=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=r,s.parentNode.removeChild(s),a(c)}};return s.onerror=s.onload=i,s.href=e,o?o.parentNode.insertBefore(s,o.nextSibling):document.head.appendChild(s),s},e=function(t,e){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var a=o[n],s=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(s===t||s===e))return a}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){a=i[n],s=a.getAttribute("data-href");if(s===t||s===e)return a}},n=function(n){return new Promise((function(a,s){var i=o.miniCssF(n),r=o.p+i;if(e(i,r))return a();t(n,r,null,a,s)}))},a={143:0};o.f.miniCss=function(t,e){var o={222:1,396:1,511:1,667:1,698:1};a[t]?e.push(a[t]):0!==a[t]&&o[t]&&e.push(a[t]=n(t).then((function(){a[t]=0}),(function(e){throw delete a[t],e})))}}}(),function(){var t={143:0};o.f.j=function(e,n){var a=o.o(t,e)?t[e]:void 0;if(0!==a)if(a)n.push(a[2]);else{var s=new Promise((function(o,n){a=t[e]=[o,n]}));n.push(a[2]=s);var i=o.p+o.u(e),r=new Error,c=function(n){if(o.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;r.message="Loading chunk "+e+" failed.\n("+s+": "+i+")",r.name="ChunkLoadError",r.type=s,r.request=i,a[1](r)}};o.l(i,c,"chunk-"+e,e)}},o.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,s,i=n[0],r=n[1],c=n[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(c)var l=c(o)}for(e&&e(n);u<i.length;u++)s=i[u],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(l)},n=self["webpackChunkmedia_app_vue"]=self["webpackChunkmedia_app_vue"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(7752)}));n=o.O(n)})();